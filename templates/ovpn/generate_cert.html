{% extends 'base.html' %}

{% block title %}Generate cert{% endblock %}
{% block content %}

{# Content Wrapper. Contains page content #}
<div class="content-wrapper">

	{# Content Header (Page header) #}
	<div class="content-header">
		<div class="container-fluid">
		<div class="row mb-2">
			<div class="col-sm-6">
			<h1 class="m-0"> {{ovpn_service.server_name}} | Generate certifications </h1>
			</div><!-- /.col -->
			<div class="col-sm-6">
			<ol class="breadcrumb float-sm-right">
				<li class="breadcrumb-item"><a href="{{ url_for('ovpn.index') }}">Home</a></li>
				<li class="breadcrumb-item active">Main</li>
			</ol>
			</div>
		</div>
		</div>
	</div>
	{#  content-header END #}

	{% if messages %}
		<ul class="flashes">
		{% for message in messages %}
			<div class="text-{{ message.tags }}">
				{{ message }}
			</div>
	    {% endfor %}
		</ul>
	{% endif %}
	
	<section class="content">
	  <div class="container-fluid">
      <div class="row">
        <h4 class="col-md-12 mb-3">Generate OpenVPN certification files</h4>

              <div class="card card-primary col-md-8">
                <div class="card-header mt-3">
                    <h3 class="card-title">Generate certification by giving CN</h3>
                </div>
                <form method="post">
                <div class="card-body">
                    <div class="form-group">
                      <input type="hidden" name="action" value="generate_cert_by_cn" />
                      <label for="new_cn">Please input a new CN(Letters Numbers - & _), such as: <code>ovpn-client-BQ_Fremont_hr-windows</code></label>
                      <input type="text" name="new_cn" class="form-control form-control-border" id="new_cn" placeholder="new cn" required="required">
                    </div>
                </div>
                <div class="card-footer">
                    <button type="submit" class="btn btn-primary float-right">Submit</button>
                </div>
                </form>
              </div>

              <div class="card card-primary col-md-8">
                <div class="card-header mt-3">
                    <h3 class="card-title">Upload Plain REQ file to generate cert file</h3>
                </div>
                <form method="post">
                    <div class="card-body">
                      <div class="form-group">
                          <label for="generatePlainCert">Select Plain REQ file</label>
                          <div class="input-group">
                            <div class="custom-file custom-file-req">
                                <input type="file" id="generatePlainCert" class="custom-file-input" name="upload_plain_req" accept=".req" required="">
                                <label class="custom-file-label req-file-label" for="generatePlainCert">Choose plain req file</label>
                            </div>
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-primary">Upload</button>
                            </div>
                          </div>
                      </div>
                    </div>
                </form>
              </div>

              <div class="card card-primary col-md-8">
                <div class="card-header mt-3">
                    <h3 class="card-title">Upload Encrypt REQ file to generate cert file</h3>
                </div>
                <form method="post">
                    <div class="card-body">
                      <div class="form-group">
                          <label for="generateEncryptCert">Select Encrypt REQ file</label>
                          <div class="input-group">
                            <div class="custom-file custom-file-encrypt-req">
                                <input type="file" id="generateEncryptCert" class="custom-file-input" name="upload_encrypt_req" accept=".req" required="">
                                <label class="custom-file-label encrypt-req-file-label" for="generateEncryptCert">Choose encrypt req file</label>
                            </div>
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-primary">Upload</button>
                            </div>
                          </div>
                      </div>
                    </div>
                </form>
              </div>

      </div>
	  </div>
	</section>  

</div>
{% endblock %}